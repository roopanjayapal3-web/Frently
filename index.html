<!DOCTYPE html>
<html lang="ta">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frently.in | Rental Marketplace</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-storage-compat.js"></script>

    <style>
        * { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 0; scroll-behavior: smooth; }
        body { background-color: #f8f9fa; color: #333; }
        
        /* Header & Nav */
        header { background: linear-gradient(135deg, #1a2a6c, #b21f1f); color: white; padding: 40px 20px; text-align: center; }
        nav { background: white; padding: 15px; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.1); display: flex; justify-content: space-around; align-items: center; flex-wrap: wrap; }
        nav a { text-decoration: none; color: #1a2a6c; font-weight: bold; margin: 5px 10px; }
        .auth-btn { background: #4285F4; color: white; padding: 8px 15px; border-radius: 5px; cursor: pointer; border: none; }

        .container { max-width: 1100px; margin: auto; padding: 20px; }
        .section-title { margin: 40px 0 20px; padding-left: 10px; border-left: 5px solid #1a2a6c; color: #1a2a6c; }
        
        /* Grid & Cards */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; }
        .card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.1); transition: 0.3s; }
        .card:hover { transform: translateY(-5px); }
        .card img { width: 100%; height: 200px; object-fit: cover; }
        .card-body { padding: 15px; }
        .price { color: #27ae60; font-size: 1.4rem; font-weight: bold; }
        .btn-rent { display: block; background: #1a2a6c; color: white; text-align: center; padding: 10px; text-decoration: none; border-radius: 5px; margin-top: 10px; }

        /* Listing Form */
        #list-item-form { background: white; padding: 30px; border-radius: 15px; margin-top: 50px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); border-top: 5px solid #e74c3c; }
        .form-group { margin-bottom: 15px; }
        input, select, button { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; margin-top: 5px; }
        .submit-btn { background: #27ae60; color: white; border: none; font-weight: bold; cursor: pointer; }
        .hidden { display: none; }

        footer { text-align: center; padding: 30px; background: #1a2a6c; color: white; margin-top: 50px; }
    </style>
</head>
<body>

    <header>
        <h1>Frently.in</h1>
        <p>à®µà®¾à®Ÿà®•à¯ˆà®•à¯à®•à¯ à®à®Ÿà¯à®™à¯à®•à®³à¯ à®…à®²à¯à®²à®¤à¯ à®µà®¿à®Ÿà¯à®™à¯à®•à®³à¯!</p>
    </header>

    <nav>
        <div>
            <a href="#houses">Houses</a>
            <a href="#tools">Tools</a>
            <a href="#gadgets">Gadgets</a>
        </div>
        <div id="auth-section">
            <button class="auth-btn" onclick="login()">Google Login</button>
        </div>
    </nav>

    <div class="container">
        <h2 class="section-title" id="houses">ğŸ  Houses</h2>
        <div class="grid" id="house-list"></div>

        <h2 class="section-title" id="tools">ğŸ› ï¸ Tools</h2>
        <div class="grid" id="tools-list"></div>

        <h2 class="section-title" id="gadgets">ğŸ’» Gadgets</h2>
        <div class="grid" id="gadgets-list"></div>

        <div id="list-item-form" class="hidden">
            <h2 style="text-align: center; margin-bottom: 20px;">à®ªà¯à®¤à®¿à®¯ à®ªà¯Šà®°à¯à®³à¯ˆà®ªà¯ à®ªà®Ÿà¯à®Ÿà®¿à®¯à®²à®¿à®Ÿà¯à®™à¯à®•à®³à¯</h2>
            <div class="form-group">
                <input type="text" id="itemName" placeholder="à®ªà¯Šà®°à¯à®³à®¿à®©à¯ à®ªà¯†à®¯à®°à¯">
            </div>
            <div class="form-group">
                <select id="itemCategory">
                    <option value="house-list">House</option>
                    <option value="tools-list">Tools</option>
                    <option value="gadgets-list">Gadgets</option>
                </select>
            </div>
            <div class="form-group">
                <input type="number" id="itemPrice" placeholder="à®µà®¾à®Ÿà®•à¯ˆ à®µà®¿à®²à¯ˆ (â‚¹/à®¨à®¾à®³à¯)">
            </div>
            <div class="form-group">
                <label>à®ªà¯Šà®°à¯à®³à®¿à®©à¯ à®ªà¯à®•à¯ˆà®ªà¯à®ªà®Ÿà®®à¯:</label>
                <input type="file" id="itemImage" accept="image/*">
            </div>
            <button class="submit-btn" onclick="uploadItem()">à®ªà®Ÿà¯à®Ÿà®¿à®¯à®²à®¿à®Ÿà¯à®• (List Item)</button>
        </div>
    </div>

    <footer>
        <p>&copy; 2026 Frently.in | All Rights Reserved</p>
    </footer>

    <script>
        // 1. Firebase Configuration (à®‰à®™à¯à®•à®³à¯ à®µà®¿à®ªà®°à®™à¯à®•à®³à¯ˆ à®‡à®™à¯à®•à¯‡ à®®à®¾à®±à¯à®±à®µà¯à®®à¯)
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT_ID.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const storage = firebase.storage();

        // 2. Login & Auth State
        function login() {
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider);
        }

        auth.onAuthStateChanged(user => {
            if (user) {
                document.getElementById('auth-section').innerHTML = `<span>Welcome, ${user.displayName}</span>`;
                document.getElementById('list-item-form').classList.remove('hidden');
            }
        });

        // 3. Upload Data to Firebase
        async function uploadItem() {
            const user = auth.currentUser;
            const name = document.getElementById('itemName').value;
            const category = document.getElementById('itemCategory').value;
            const price = document.getElementById('itemPrice').value;
            const imageFile = document.getElementById('itemImage').files[0];

            if (!name || !price || !imageFile) {
                alert("à®…à®©à¯ˆà®¤à¯à®¤à¯ à®µà®¿à®ªà®°à®™à¯à®•à®³à¯ˆà®¯à¯à®®à¯ à®¨à®¿à®°à®ªà¯à®ªà®µà¯à®®à¯!");
                return;
            }

            alert("Uploading... à®¤à®¯à®µà¯à®šà¯†à®¯à¯à®¤à¯ à®•à®¾à®¤à¯à®¤à®¿à®°à¯à®•à¯à®•à®µà¯à®®à¯.");

            // Image Upload to Firebase Storage
            const storageRef = storage.ref(`items/${Date.now()}_${imageFile.name}`);
            await storageRef.put(imageFile);
            const imageUrl = await storageRef.getDownloadURL();

            // Store in Firestore
            await db.collection("rentals").add({
                name, category, price, imageUrl,
                owner: user.displayName,
                email: user.email,
                time: firebase.firestore.FieldValue.serverTimestamp()
            });

            alert("à®µà¯†à®±à¯à®±à®¿à®•à®°à®®à®¾à®•à®ªà¯ à®ªà®Ÿà¯à®Ÿà®¿à®¯à®²à®¿à®Ÿà®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯!");
            location.reload();
        }

        // 4. Real-time Data Sync
        db.collection("rentals").orderBy("time", "desc").onSnapshot(snapshot => {
            // Clear existing lists
            document.getElementById('house-list').innerHTML = '';
            document.getElementById('tools-list').innerHTML = '';
            document.getElementById('gadgets-list').innerHTML = '';

            snapshot.forEach(doc => {
                const item = doc.data();
                const card = `
                    <div class="card">
                        <img src="${item.imageUrl}" alt="Item">
                        <div class="card-body">
                            <h3>${item.name}</h3>
                            <p class="price">â‚¹${item.price} / à®¨à®¾à®³à¯</p>
                            <p style="font-size:0.8rem;">Owner: ${item.owner}</p>
                            <a href="mailto:${item.email}?subject=Interested in ${item.name}" class="btn-rent">Contact Owner</a>
                        </div>
                    </div>
                `;
                document.getElementById(item.category).innerHTML += card;
            });
        });
    </script>
</body>
</html>
